<html>
  <head>
  <link rel="stylesheet" href="style.css">
  <link id = "styles" rel="stylesheet" href="style.css">
  <title>Politica</title>
  <link rel="icon" type="image/x-icon" href="trump.png">
  <meta charset="UTF-8">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src = "css.js"></script>

  </head>
<body>
    <select style = "position:absolute;right:1;" id="styletypes">
  <option value="Light">Lightmode</option>
  <option value="Dark">Darkmode</option>
</select>
  <div class="boardlist">
    <p><a href="index.html">Home</a> | <a href="info.html">Info</a> | <a href="partysubmissions.html">Party Submissions</a> | <a href="pollboard.html">Pollboard</a> | <a href="policies.html">Polices</a> | <a href="boardnocaps.html">No-cap board</a></p>
  </div>
  <hr>
  <h1>Board with polling</h1>
<div class="ban">
  <h2>How to use?</h2>
    <p>Factions could use this for their own voting.</p>
  </div>
  
<hr>
<b>Lorem ipsum</b> <br>
<b><small>Dolor sit amet.</small></b>
<form method = "POST" action = "post.php">
    <input type = "text" placeholder = "Faction name" name = "faction"> <br>
        <input type = "text" placeholder = "Poll Link" name = "poll"> <br>
    <textarea placeholder = "Comment" name = "body"></textarea> <br>
    <input type = "text" style = "display:none" name = "board" value = "Bills">
    <input type = "submit" value = "submit">
</form>
<hr>
<div id = "policies"></div>
</div>
<hr>
<div class="footer">
<p class="unimportant" style="margin-top:20px;text-align:center;">Credits to:</p>
<p class="unimportant" style="margin-top:20px;text-align:center;">Viasyni for base design, Xoot/Codefag for PHP/JS, Vichan for CSS,</p>
<p class="unimportant" style="margin-top:20px;text-align:center;"><a href="https://github.com/viasyni/politica">Politica repository</a></p>
</div>
</body>
</html>

<script>
    $.post("/mod/sub/get.php",
{
    
  "file": "b"
},
  function(data, status){

    let i = JSON.parse(data);
console.log(i);
for(let x = i.length-1; x > 0; x -= 1) {
    if(i[x]?.poll.includes('https://strawpoll.com/')) {
    let post = document.createElement("div");
post.className = "post reply";
let h = document.createElement("label");
h.className = "intro";
h.innerText = i[x]?.faction.replaceAll("\\", "");
h.style.fontWeight = "bold";
h.style.color = "gray";
post.appendChild(h);
let p1 = document.createElement("a");
post.appendChild(document.createElement("br"))
p1.href = i[x]?.poll.replaceAll("\\", "");
p1.innerText = i[x]?.body.replaceAll("\\", "");
post.appendChild(p1);
document.getElementById("policies").appendChild(post);
document.getElementById("policies").appendChild(document.createElement("br"));}
}
});
</script>
